# swagger-speccer

An SBT plugin that generates Play2 routes files from Swagger 2.0 specifications.

*Disclaimer:* the current state of the plugin is heavily untested and with a lot of the possible swagger-to-play mappings missing.  We thought we should get some release out though, so we can get some feedback.

## configuration

In your Play project's build.sbt file enable both the `PlayScala` plugin and the `SwaggerSpeccer`.  Add a `swagger` key pointing to the swagger api specification that you want to use as Play's routes definition. E.g.:
 
```
lazy val root = (project in file(".")).enablePlugins(PlayScala, SwaggerSpeccer)

swagger := "conf/swagger.api.yaml"
```

Please note that the plugin **will override any `conf/routes` file** present.  This file shuld not longer be seen as the source of routing definitions, instead the plugin will generate a routes file from the swagger api specification.

## enabling

In your `project` directory add the following lines to `plugins.sbt`:

```
resolvers += Resolver.url("sbt-plugins", url("http://dl.bintray.com/zalando/sbt-plugins"))(Resolver.ivyStylePatterns)

addSbtPlugin("org.zalando" % "speccer-plugin" % "0.0.1")
```

## running

Create a swagger api specification file in your Play project with the same name as specified above and run the following command from within activator:
 
```
~ ;speccer ;compile
```

This will continually re-generate Play's routes file and compile the project.  You can test this in the `speccer-test` project that is provided as an independent (non module) directory in this project.  Have a look at `conf/api.yaml` to see the swagger api definition, mimicking the routes definition as generated by the well known activator play template.

```
swagger: '2.0'
info:
  title: title
  description: description
  version: "1.0.0"
host: localhost:9000
produces:
  - application/json
paths:
  /:
    get:
      x-handler: controllers.Application.index
  /assets/*file:
    get:
      x-handler: "controllers.Assets.versioned(path=\"/public\", file: Asset)"
```

The command above should generate the missing `routes` file after which compilation succeeds.  Adding a route with a new controller to the swagger definition `api.yaml` in `conf` should make compilation fail since it's missing a controller.  E.g.

```
swagger: '2.0'
info:
  title: title
  description: description
  version: "1.0.0"
host: localhost:9000
produces:
  - application/json
paths:
  /:
    get:
      x-handler: controllers.Application.index
  /orders:
    get:
      x-handler: controllers.Application.orders
  /assets/*file:
    get:
      x-handler: "controllers.Assets.versioned(path=\"/public\", file: Asset)"
```

Adding this controller (and method) makes compile succeed again.  

---

## licencing

Copyright (c) 2015 Zalando SE

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.


